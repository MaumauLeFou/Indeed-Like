<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Liste des annonces</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <div class="menu-toggle" onclick="toggleMenu()">☰</div>
      <h1>Liste des annonces d'emploi</h1>
      <nav class="sliding-menu">
        <ul>
          <li><a href="#">Annonces</a></li>
          <li><a href="#">Mes candidatures</a></li>
          <li><a href="#">Paramètres</a></li>
          <li><a href="#">Se déconnecter</a></li>
        </ul>
      </nav>
    </header>
    <main>
      <section id="annonces">
        <script>
          // Récupérer les données depuis le serveur
          fetch("http://localhost:3000/annonces")
            .then((response) => response.json())
            .then((annonces) => {
              // Sélectionner la section où les annonces doivent être affichées
              const sectionAnnonces = document.getElementById("annonces");

              // Créer les éléments HTML pour chaque annonce
              annonces.forEach((annonce) => {
                const divAnnonce = document.createElement("div");
                divAnnonce.className = "annonce";

                const h2 = document.createElement("h2");
                h2.textContent = `Offre d'emploi: ${annonce.titre}`;

                const pDescription = document.createElement("p");
                pDescription.textContent = `Description: ${annonce.description}`;

                const pSalaire = document.createElement("p");
                pSalaire.textContent = `Salaire: ${annonce.salaire}€`;

                const pLieu = document.createElement("p");
                pLieu.textContent = `Lieu: ${annonce.lieu}`;

                const button = document.createElement("button");
                button.className = "btn";
                button.onclick = () => showDetails(annonce);
                button.textContent = "En savoir plus";

                divAnnonce.append(h2, pDescription, pSalaire, pLieu, button);
                sectionAnnonces.appendChild(divAnnonce);
              });
            });
        </script>
      </section>
    </main>
    <footer>
      <p>&copy; 2024 Job Board</p>
    </footer>
    <div id="applicationModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeApplicationForm()">&times;</span>
        <h2>Postuler à l'annonce</h2>
        <form id="applicationForm">
          <label for="nom">Nom:</label><br />
          <input type="text" id="nom" name="nom" required /><br />
          <label for="prenom">Prénom:</label><br />
          <input type="text" id="prenom" name="prenom" required /><br />
          <label for="email">Email:</label><br />
          <input type="email" id="email" name="email" required /><br />
          <label for="telephone">Téléphone:</label><br />
          <input type="tel" id="telephone" name="telephone" /><br />
          <label for="cv">CV:</label><br />
          <input type="file" id="cv" name="cv" accept=".pdf,.doc,.docx" /><br />
          <label for="lettre_motivation">Lettre de motivation:</label><br />
          <input
            type="file"
            id="lettre_motivation"
            name="lettre_motivation"
            accept=".pdf,.doc,.docx"
          /><br /><br />
          <button type="submit">Soumettre</button>
          <button type="button" onclick="closeApplicationForm()">
            Annuler
          </button>
        </form>
        <div id="confirmationMessage" class="confirmation-message hidden">
          Votre candidature a bien été envoyée
        </div>
      </div>
    </div>
    <script src="script.js"></script>
  </body>
</html>
